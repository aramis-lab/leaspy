docs-build:
  image: "python:3.11"
  script:
    - python -V
    - pip install pipx
    - pipx ensurepath
    - source ~/.bashrc
    - pipx install poetry
    - poetry install --with docs
    - source `poetry env info --path`/bin/activate
    - pip freeze
    - make doc

release-pypi:
  image: "python:3.11"
  rules:
    - if: $CI_COMMIT_TAG
      when: always
  script:
    - python -V
    - pip install pipx
    - pipx ensurepath
    - source ~/.bashrc
    - pipx install poetry
    - poetry build
    - poetry publish -u __token__ -a $PYPI_TOKEN -n

